"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.readable = void 0;
const store_1 = require("svelte/store");
function readable(undoManager) {
    const stackCount = store_1.readable({ undoSize: 0, redoSize: 0 }, (set) => {
        let undoSize = 0;
        let redoSize = 0;
        const updateStackSizes = () => {
            undoSize = undoManager.undoStack.length;
            redoSize = undoManager.redoStack.length;
            set({ undoSize, redoSize });
        };
        const added = () => {
            updateStackSizes();
        };
        const popped = () => {
            updateStackSizes();
        };
        undoManager.on('stack-item-added', added);
        undoManager.on('stack-item-popped', popped);
        return () => {
            undoManager.off('stack-item-added', added);
            undoManager.off('stack-item-popped', popped);
        };
    });
    return stackCount;
}
exports.readable = readable;
//# sourceMappingURL=undo.js.map